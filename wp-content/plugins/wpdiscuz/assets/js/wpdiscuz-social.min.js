function wpcShareCommentFB(e,s){FB.ui({method:"share",href:e,quote:s},(function(e){}))}(!parseInt(wpdiscuzAjaxObj.fbUseOAuth2)&&parseInt(wpdiscuzAjaxObj.enableFbLogin)||parseInt(wpdiscuzAjaxObj.enableFbShare))&&wpdiscuzAjaxObj.facebookAppID&&(!function(e,s,o){var n,a=e.getElementsByTagName(s)[0];e.getElementById(o)||((n=e.createElement(s)).id=o,n.src="//connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(n,a))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){FB.init({appId:wpdiscuzAjaxObj.facebookAppID,cookie:!0,xfbml:!0,version:"v7.0"})}),jQuery(document).ready((function(e){var s;(s=Cookies.get("wpdiscuz_social_login_message"))&&"undefined"!==s&&(Cookies.remove("wpdiscuz_social_login_message"),wpdiscuzAjaxObj.setCommentMessage(decodeURIComponent(s.replace(/\+/g,"%20")),"error")),Cookies.get("wpdiscuz_scroll_to_comments")&&(Cookies.remove("wpdiscuz_scroll_to_comments",{path:"/"}),e("html, body").animate({scrollTop:e("#comments").offset().top-32},1e3)),e("body").on("click",".wpd-comment-share .fa-facebook-f",(function(){if(1==wpdiscuzAjaxObj.enableFbShare){var s=e(this).parents(".wpd-comment").find(".wpd-comment-right").attr("id"),o=window.location.href;-1!==o.indexOf("#")&&(o=o.substring(0,o.indexOf("#"))),wpcShareCommentFB(o+="#"+s,e(this).parents(".wpd-comment-right").find(".wpd-comment-text").text())}}));var o="";function n(e,s){var o,n="";t(s,1),Cookies.set("wpdiscuz_scroll_to_comments",1,{path:"/"}),"facebook"===e&&0==wpdiscuzAjaxObj.facebookUseOAuth2?FB.getLoginStatus((function(t){"connected"===t.status?(o=t.authResponse.accessToken,n=t.authResponse.userID,a(e,o,n,s)):FB.login((function(t){"connected"===t.status&&(o=t.authResponse.accessToken,n=t.authResponse.userID,a(e,o,n,s))}),{scope:"public_profile,email"})})):a(e,o,n,s)}function a(s,o,n,a){return e.ajax({type:"POST",url:wpdiscuzAjaxObj.url,data:{action:"wpd_social_login",provider:s,token:o,userID:n,postID:wpdiscuzAjaxObj.wc_post_id}}).done((function(s){!function(s,o){try{var n=e.parseJSON(s),a=n.code,i=n.message,c=n.url;200===parseInt(a)?location.assign(c):wpdiscuzAjaxObj.setCommentMessage(i,"error")}catch(e){console.log(e)}t(o,0)}(s,a)})),""}function t(e,s){1===s?e.find(".wpdiscuz-social-login-spinner").show():e.find(".wpdiscuz-social-login-spinner").hide()}e("body").on("click","#wpdcom .wpd-social-login .wpdiscuz-login-button",(function(){var s=e(this).parents(".wpd-social-login");!function(e,s){1!=parseInt(wpdiscuzAjaxObj.socialLoginAgreementCheckbox)||1==Cookies.get("socialLoginAgreementConfirmed")?n(e,s):s.parents(".wpd-form-wrap, .wpd-form").find(".wpd-social-login-agreement").first().slideDown(700)}(o=function(e){var s="";e.hasClass("wpdsn-fb")&&(s="facebook");e.hasClass("wpdsn-insta")&&(s="instagram");e.hasClass("wpdsn-gg")&&(s="google");e.hasClass("wpdsn-ds")&&(s="disqus");e.hasClass("wpdsn-wp")&&(s="wordpress");e.hasClass("wpdsn-tw")&&(s="twitter");e.hasClass("wpdsn-vk")&&(s="vk");e.hasClass("wpdsn-linked")&&(s="linkedin");e.hasClass("wpdsn-yandex")&&(s="yandex");e.hasClass("wpdsn-weixin")&&(s="wechat");e.hasClass("wpdsn-weibo")&&(s="weibo");e.hasClass("wpdsn-qq")&&(s="qq");e.hasClass("wpdsn-baidu")&&(s="baidu");e.hasClass("wpdsn-telegram")&&(s="telegram");return s}(e(this)),s)})),e("body").on("click","#wpdcom .wpd-agreement-buttons-right .wpd-agreement-button",(function(){var s=e(this).parents(".wpd-form-wrap, .wpd-form").find(".wpd-social-login-agreement").slideUp(700);e(this).hasClass("wpd-agreement-button-agree")&&(wpdiscuzAjaxObj.isCookiesEnabled&&Cookies.set("socialLoginAgreementConfirmed",1,{expires:30,path:"/"}),n(o,s))}));var i=function(){var e,s="",o=/[#\?\&]tgAuthResult=([A-Za-z0-9\-_=]*)$/;try{if(e=(s=location.hash.toString()).match(o)){location.hash=s.replace(o,"");var n=e[1]||"",a=(n=n.replace(/-/g,"+").replace(/_/g,"/")).length%4;return a>1&&(n+=new Array(5-a).join("=")),JSON.parse(window.atob(n))}}catch(e){console.log(e)}return!1}();i&&(e("#wpdiscuz-loading-bar").show(),e.ajax({type:"POST",url:wpdiscuzAjaxObj.url,data:{action:"wpd_login_callback",provider:"telegram",user:i}}).done((function(s){console.log(s),s.success?location.reload():(wpdiscuzAjaxObj.setCommentMessage(s.data,"error"),e("#wpdiscuz-loading-bar").fadeOut(250))})).fail((function(s,o,n){console.log(n),e("#wpdiscuz-loading-bar").fadeOut(250)})))}));